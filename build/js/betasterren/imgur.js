"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.Imgur=t()}(void 0,function(){var e=function e(t){if(!(this&&this instanceof e))return new e(t);if(t||(t={}),!t.clientid)throw"Provide a valid Client Id here: https://api.imgur.com/";this.clientid=t.clientid,this.endpoint="https://api.imgur.com/3/image",this.callback=t.callback||void 0,this.dropzone=document.querySelectorAll(".dropzone"),this.info=document.querySelectorAll(".info"),this.run()};return e.prototype={createEls:function(e,t,n){var i,o=document.createElement(e);for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);return n&&o.appendChild(document.createTextNode(n)),o},insertAfter:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},post:function(e,t,n){var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Authorization","Client-ID "+this.clientid),i.onreadystatechange=function(){if(4===this.readyState){if(!(this.status>=200&&this.status<300))throw new Error(this.status+" - "+this.statusText);var e="";try{e=JSON.parse(this.responseText)}catch(t){e=this.responseText}n.call(window,e)}},i.send(t),i=null},createDragZone:function(){var e,t,n;e=this.createEls("p",{className:"top flow-text"},"Drop Image Here"),t=this.createEls("p",{className:"flow-text"},"Or click here to select image"),n=this.createEls("input",{type:"file",className:"input",accept:"image/*"}),Array.prototype.forEach.call(this.info,function(n){n.appendChild(e),n.appendChild(t)}.bind(this)),Array.prototype.forEach.call(this.dropzone,function(e){e.appendChild(n),this.status(e),this.upload(e)}.bind(this))},status:function(){},matchFiles:function(e,t){t.nextSibling;if(e.type.match(/image/)&&"image/svg+xml"!==e.type){var n=document.querySelector(".preloader-wrapper");document.querySelector(".info").removeChild(document.querySelector(".info p")),document.querySelector(".info").removeChild(document.querySelector(".info p")),n.classList.remove("hide"),n.classList.add("active");var i=new FormData;i.append("image",e),this.post(this.endpoint,i,function(e){"function"==typeof this.callback&&this.callback.call(this,e)}.bind(this))}else n.classList.add("hide"),n.classList.remove("active"),document.querySelector(".center-align h1").innerHTML="Invalid archive"},upload:function(e){var t,n,i,o,r=["dragenter","dragleave","dragover","drop"];e.addEventListener("change",function(r){if(r.target&&"INPUT"===r.target.nodeName&&"file"===r.target.type)for(n=r.target.files,i=0,o=n.length;i<o;i+=1)t=n[i],this.matchFiles(t,e)}.bind(this),!1),r.map(function(t){e.addEventListener(t,function(e){e.target&&"INPUT"===e.target.nodeName&&"file"===e.target.type&&("dragleave"===t||"drop"===t?e.target.parentNode.classList.remove("dropzone-dragging"):e.target.parentNode.classList.add("dropzone-dragging"))},!1)})},run:function(){this.createDragZone()}},e});var feedback=function(e){if(!0===e.success){for(var t=e.data.link.replace(/^http:\/\//i,"https://"),n=document.querySelector(".info");n.firstChild;)n.removeChild(n.firstChild);n.innerHTML+='<h3 class="center-align">Success</h3>';var i=document.querySelector("#CSRFtoken"),o=new XMLHttpRequest;o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.open("POST","/generel/upload.php"),o.send(encodeURI("CSRFtoken="+i+"type=leerling_profile_pictureurl="+t))}};new Imgur({clientid:"bab6d5583b1ff5d",callback:feedback});