!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Imgur=t()}(this,function(){"use strict";var e=function(t){if(!(this&&this instanceof e))return new e(t);if(t||(t={}),!t.clientid)throw"Provide a valid Client Id here: https://api.imgur.com/";this.clientid=t.clientid,this.endpoint="https://api.imgur.com/3/image",this.callback=t.callback||void 0,this.dropzone=document.querySelectorAll(".dropzone"),this.info=document.querySelectorAll(".info"),this.run()};return e.prototype={createEls:function(e,t,i){var n,r=document.createElement(e);for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return i&&r.appendChild(document.createTextNode(i)),r},insertAfter:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},post:function(e,t,i){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Authorization","Client-ID "+this.clientid),n.onreadystatechange=function(){if(4===this.readyState){if(!(this.status>=200&&this.status<300))throw new Error(this.status+" - "+this.statusText);var e="";try{e=JSON.parse(this.responseText)}catch(t){e=this.responseText}i.call(window,e)}},n.send(t),n=null},createDragZone:function(){var e,t,i;e=this.createEls("p",{className:"top flow-text"},"Drop Image Here"),t=this.createEls("p",{className:"flow-text"},"Or click here to select image"),i=this.createEls("input",{type:"file",className:"input",accept:"image/*"}),Array.prototype.forEach.call(this.info,function(i){i.appendChild(e),i.appendChild(t)}.bind(this)),Array.prototype.forEach.call(this.dropzone,function(e){e.appendChild(i),this.status(e),this.upload(e)}.bind(this))},status:function(){},matchFiles:function(e,t){t.nextSibling;if(e.type.match(/image/)&&"image/svg+xml"!==e.type){var i=document.querySelector(".preloader-wrapper");document.querySelector(".info").removeChild(document.querySelector(".info p")),document.querySelector(".info").removeChild(document.querySelector(".info p")),i.classList.remove("hide"),i.classList.add("active");var n=new FormData;n.append("image",e),this.post(this.endpoint,n,function(e){"function"==typeof this.callback&&this.callback.call(this,e)}.bind(this))}else i.classList.add("hide"),i.classList.remove("active"),document.querySelector(".center-align h1").innerHTML="Invalid archive"},upload:function(e){var t,i,n,r,a=["dragenter","dragleave","dragover","drop"];e.addEventListener("change",function(a){if(a.target&&"INPUT"===a.target.nodeName&&"file"===a.target.type)for(i=a.target.files,n=0,r=i.length;n<r;n+=1)t=i[n],this.matchFiles(t,e)}.bind(this),!1),a.map(function(t){e.addEventListener(t,function(e){e.target&&"INPUT"===e.target.nodeName&&"file"===e.target.type&&("dragleave"===t||"drop"===t?e.target.parentNode.classList.remove("dropzone-dragging"):e.target.parentNode.classList.add("dropzone-dragging"))},!1)})},run:function(){this.createDragZone()}},e});var feedback=function(e){if(!0===e.success){for(var t=e.data.link.replace(/^http:\/\//i,"https://"),i=document.querySelector(".info");i.firstChild;)i.removeChild(i.firstChild);i.innerHTML+='<h3 class="center-align">Success</h3>';var n=document.querySelector("#CSRFtoken"),r=new XMLHttpRequest;r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.open("POST","/generel/upload.php"),r.send(encodeURI("CSRFtoken="+n+"type=leerling_profile_pictureurl="+t))}};new Imgur({clientid:"bab6d5583b1ff5d",callback:feedback});