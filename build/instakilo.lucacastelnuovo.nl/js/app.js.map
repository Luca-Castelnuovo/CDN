{"version":3,"sources":["../../../instakilo.lucacastelnuovo.nl/js/init.js","../../../instakilo.lucacastelnuovo.nl/js/request.js","../../../instakilo.lucacastelnuovo.nl/js/feed_posts.js","../../../instakilo.lucacastelnuovo.nl/js/feed_messages.js","../../../instakilo.lucacastelnuovo.nl/js/app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["function materialize_init() {\n    // Enable SideBar\n    var sidenav = M.Sidenav.init(document.querySelectorAll('.sidenav'), {\n        edge: 'right',\n        draggable: 1\n    });\n\n    // Add character counter to inputs\n    M.CharacterCounter.init(document.querySelectorAll('.counter'));\n\n    // Enable MaterialBox\n    var materialbox = M.Materialbox.init(document.querySelectorAll('.materialboxed'), {});\n}\n\nif (typeof auto_init !== 'undefined' && auto_init) {\n    document.addEventListener('DOMContentLoaded', function() {\n        materialize_init();\n    });\n}\n","function request(method, url, callback) {\n    const xhr = new XMLHttpRequest();\n\n    xhr.onreadystatechange = function() {\n        if (xhr.readyState !== 4) return;\n        callback(JSON.parse(xhr.responseText));\n    };\n\n    xhr.open(method, url);\n    xhr.send();\n}\n","function feed_render_posts(data) {\n    setInterval(feed_check_posts(), 3000);\n\n    if (!data.success) {\n        return false;\n    }\n\n    localStorage.setItem('posts', data);\n\n    let posts_array = [];\n\n    for (post of data.posts) {\n        posts_array.push(feed_render_post(post));\n    }\n\n    return posts_array.join('');\n}\n\nfunction feed_check_posts() {\n    request('GET', `https://instakilo.lucacastelnuovo.nl/posts/actions/${CSRFtoken}/feed`, function(response) {\n        if (response !== localStorage.getItem('posts')) {\n            M.toast({\n                html: '<span>You have new posts!</span><button class=\"btn-flat toast-action blue-text accent-4\" onclick=\"location.reload()\">Load Posts</button>',\n                displayLength: 86400000\n            });\n        }\n    });\n}\n\nfunction feed_render_post(post) {\n    let comments;\n    let comments_form;\n\n    if (post.comments !== null && post.comments_allowed) {\n        comments = feed_render_comments(post.comments);\n        comments_form = `\n            <form action=\"/posts/actions\" method=\"POST\">\n                <div class=\"row mb-0\">\n                    <div class=\"col s12 m9\">\n                        <div class=\"input-field col s12 mb-0\">\n                            <label for=\"form_comment\">Comment</label>\n                            <textarea id=\"form_comment\" class=\"materialize-textarea counter\" name=\"comment\" data-length=\"200\"></textarea>\n                        </div>\n                    </div>\n                    <div class=\"input-field col s12 m3\">\n                        <input type=\"hidden\" name=\"CSRFtoken\" value=\"${CSRFtoken}\">\n                        <input type=\"hidden\" name=\"post_id\" value=\"${post.id}\">\n\n                        <button class=\"btn waves-effect waves-light col s12 blue accent-4\" name=\"action\" type=\"submit\">\n                            Send <i class=\"material-icons right\">send</i>\n                        </button>\n                    </div>\n                </div>\n            </form>\n        `;\n    } else {\n        comments = '<li class=\"collection-item\">Comments are disabled</li>';\n        comments_form = '';\n    }\n\n    const like_icon = post.liked ? 'favorite' : 'favorite_border';\n    const like_action = post.liked ? 'undo_like' : 'like';\n\n    return `\n        <div class=\"col s12\">\n            <div class=\"card\">\n                <div class=\"card-image\"><img id=\"post_image\" class=\"materialboxed\" data-caption=\"${post.caption}\" src=\"${post.img_url}\"></div>\n                <div class=\"card-content\">\n                    <p>\n                        <span id=\"post_owner\"><a href=\"/u/${post.username}\">${post.username}</a></span> ${post.caption}\n                    </p>\n                </div>\n                <div class=\"card-action\">\n                    <div class=\"row likes\">\n                        <a href=\"/posts/actions/${CSRFtoken}/${like_action}/${post.id}\" class=\"mr-6\"><i class=\"material-icons blue-icon\">${like_icon}</i></a> ${post.likes} likes\n                    </div>\n                    <div class=\"row mb-0\">\n                        <h6>Comments:</h6>\n                        <ul class=\"collection\">\n                            ${comments}\n                        </ul>\n                            ${comments_form}\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;\n}\n\nfunction feed_render_comments(comments) {\n    let comments_array = [];\n\n    for (comment of comments) {\n        comments_array.push(feed_render_comment(comment));\n    }\n\n    return comments_array.join('');\n}\n\nfunction feed_render_comment(comment) {\n    return `\n        <li class=\"collection-item avatar\">\n            <img src=\"${comment.profile_picture}\" onerror=\"this.src='https://github.com/identicons/${comment.username}.png'\" class=\"circle\" />\n            <span class=\"title\"><a href=\"/u/${comment.username}\" class=\"blue-text\">${comment.username}</a></span>\n            <p class=\"truncate\">${comment.body}</p>\n        </li>\n    `;\n}\n","function feed_render_messages(data) {\n    // setInterval(feed_check_messages(), 3000);\n\n    if (!data.success) {\n        return false;\n    }\n\n    // localStorage.setItem('messages', data);\n\n    let messages_array = [];\n\n    for (message of data.messages) {\n        messages_array.push(feed_render_message(message));\n    }\n\n    return messages_array.join('');\n}\n\nfunction feed_check_messages() {\n    request('GET', `https://instakilo.lucacastelnuovo.nl/messages/actions/${CSRFtoken}`, function(response) {\n        if (response !== localStorage.getItem('messages')) {\n            M.toast({\n                html: '<span>You have new messages!</span><button class=\"btn-flat toast-action blue-text accent-4\" onclick=\"location.reload()\">Load messages</button>',\n                displayLength: 86400000\n            });\n        }\n    });\n}\n\nfunction feed_render_message(message) {\n    return `\n        <li class=\"collection-item avatar\">\n            <i class=\"material-icons circle\">account_circle</i> <span class=\"title\">FirstName Last Name</span>\n            <p class=\"truncate\">Layers, background, shot, concept – good!</p><a class=\"secondary-content\" href=\"#!\"><i class=\"material-icons blue-icon\">message</i></a>\n        </li>\n    `;\n}\n","// @codekit-prepend \"init.js\";\n// @codekit-prepend \"request.js\";\n// @codekit-prepend \"feed_posts.js\";\n// @codekit-prepend \"feed_messages.js\";\n"]}